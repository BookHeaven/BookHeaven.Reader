@using System.Timers
@implements IDisposable
<div>
    @_clock
</div>

@code {
    string _clock = DateTime.Now.ToString("HH:mm");
    readonly Timer _clockTimer = new() { Interval = 1000 };
    
    protected override void OnInitialized()
    {
        _clockTimer.Elapsed += OnTimerTick;
        _clockTimer.Start();
    }

    private void OnTimerTick(object? sender, EventArgs e)
    {
        var time = DateTime.Now.ToString("HH:mm");
        if (time == _clock)
            return;
        
        _clock = time;
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        _clockTimer.Elapsed -= OnTimerTick;
        _clockTimer.Stop();
        _clockTimer.Dispose();
        GC.SuppressFinalize(this);
    }
}